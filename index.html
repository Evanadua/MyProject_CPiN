<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>ConsPIndo - Consortium Pioneers Indonesia</title>
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' https://sdk.minepi.com https://www.gstatic.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.quilljs.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://cdn.quilljs.com; img-src 'self' data: https: blob:; connect-src 'self' https: wss:;">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  
  <!-- HTTPS Enforcement for Pi Browser -->
  <script>
    // Force HTTPS for Pi Browser compatibility
    if (location.protocol !== 'https:' && location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
      location.replace('https:' + window.location.href.substring(window.location.protocol.length));
    }
    
    // Pi Browser detection
    const isPiBrowser = navigator.userAgent.includes('PiBrowser') || window.Pi;
    if (isPiBrowser) {
      console.log('Pi Browser detected - Enhanced features enabled');
    }
  </script>
 
   <link rel="stylesheet" href="style.css">
   <!-- Custom JavaScript -->
  
  <!-- External CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"/>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet" />


     <!-- External Scripts -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
  
  <!-- Firebase v9 SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>


<!-- Pi Network SDK -->
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>
// Pi Network SDK Configuration
let piInitialized = false;

// Initialize Pi SDK when page loads
function initPiSDK() {
  if (window.Pi && !piInitialized) {
    try {
      window.Pi.init({ 
        version: "2.0", 
        sandbox: false // Set to true for testing, false for production
      });
      piInitialized = true;
      console.log("Pi SDK initialized successfully");
      
      // Update UI to show Pi login is available
      updatePiLoginStatus(true);
    } catch (error) {
      console.error("Pi SDK initialization failed:", error);
      updatePiLoginStatus(false);
    }
  } else {
    console.log("Pi SDK not available or already initialized");
    updatePiLoginStatus(false);
  }
}

// Update UI based on Pi availability
function updatePiLoginStatus(available) {
  const loginStatus = document.getElementById("loginStatus");
  if (loginStatus) {
    if (available) {
      loginStatus.innerHTML = "<span style='color: green;'>‚úì Pi Browser Ready</span>";
    } else {
      loginStatus.innerHTML = "<span style='color: orange;'>‚ö† Use Pi Browser for Pi Login</span>";
    }
  }
}

// Enhanced Pi Login function
function piLogin() {
  // Check if we're in Pi Browser
  if (!window.Pi) {
    alert("Pi Network SDK not available. Please use Pi Browser to access Pi features.");
    return;
  }
  
  if (!piInitialized) {
    initPiSDK();
    if (!piInitialized) {
      alert("Failed to initialize Pi SDK. Please refresh and try again.");
      return;
    }
  }
  
  if (typeof window.Pi.authenticate !== "function") {
    alert("Pi authentication not available. Please ensure you're using the latest Pi Browser.");
    return;
  }
  
  // Show loading state
  const loginButton = document.querySelector('[value="pi"]');
  if (loginButton) {
    loginButton.textContent = 'Connecting...';
  }
  
  // Request authentication with required scopes
  window.Pi.authenticate(["username", "payments"], {
    onIncompletePaymentFound: (payment) => {
      console.log("Incomplete payment found:", payment);
      // Handle incomplete payment
    }
  })
    .then(function(auth) {
      console.log("Pi authentication successful:", auth);
      
      // Store Pi user data
      localStorage.setItem('piUser', JSON.stringify({
        uid: auth.user.uid,
        username: auth.user.username,
        accessToken: auth.accessToken,
        loginTime: new Date().toISOString()
      }));
      
      // Update UI
      document.getElementById("loginStatus").innerHTML = 
        `<span style='color: green;'>‚úì Pi User: ${auth.user.username}</span>`;
      
      // Show logout button
      const logoutBtn = document.getElementById("logoutPiBtn");
      if (logoutBtn) {
        logoutBtn.style.display = "block";
      }
      
      // Navigate to home page or update content
      showPiUserContent(auth.user);
      
      alert(`Welcome, ${auth.user.username}! You're now logged in with Pi Network.`);
    })
    .catch(function(error) {
      console.error("Pi authentication failed:", error);
      
      let errorMessage = "Pi login failed. ";
      if (error.errorType === 'user_cancelled') {
        errorMessage += "Login was cancelled.";
      } else if (error.errorType === 'unauthorized') {
        errorMessage += "App not authorized. Please check your Pi Network app configuration.";
      } else {
        errorMessage += "Please try again or contact support.";
      }
      
      alert(errorMessage);
    })
    .finally(() => {
      // Reset button state
      const loginButton = document.querySelector('[value="pi"]');
      if (loginButton) {
        loginButton.textContent = 'Login Pi';
      }
    });
}

// Show Pi user specific content
function showPiUserContent(user) {
  const pageContent = document.getElementById("pageContent");
  if (pageContent) {
    pageContent.innerHTML = `
      <div style="background: linear-gradient(135deg, #f5d67b, #d4af37); padding: 20px; border-radius: 10px; margin: 10px 0;">
        <h3 style="color: #000; margin: 0 0 10px 0;">üéâ Welcome to ConsPIndo!</h3>
        <p style="color: #000; margin: 5px 0;">‚úì Pi User: <strong>${user.username}</strong></p>
        <p style="color: #000; margin: 5px 0;">‚úì Authentication: <strong>Success</strong></p>
        <p style="color: #000; margin: 5px 0;">‚úì Pi Payments: <strong>Available</strong></p>
        <button onclick="showPage('home')" style="background: #2563eb; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer;">Continue to App</button>
      </div>
    `;
  }
}

// Pi Logout function
function piLogout() {
  localStorage.removeItem('piUser');
  document.getElementById("loginStatus").innerHTML = "";
  const logoutBtn = document.getElementById("logoutPiBtn");
  if (logoutBtn) {
    logoutBtn.style.display = "none";
  }
  alert("You have been logged out from Pi Network.");
  showPage('home');
}

// Initialize Pi SDK when page loads
document.addEventListener("DOMContentLoaded", function() {
  // Wait a bit for Pi SDK to load
  setTimeout(() => {
    initPiSDK();
    
    // Check if user was previously logged in with Pi
    const piUser = localStorage.getItem('piUser');
    if (piUser) {
      try {
        const userData = JSON.parse(piUser);
        document.getElementById("loginStatus").innerHTML = 
          `<span style='color: green;'>‚úì Pi User: ${userData.username}</span>`;
        const logoutBtn = document.getElementById("logoutPiBtn");
        if (logoutBtn) {
          logoutBtn.style.display = "block";
        }
      } catch (e) {
        localStorage.removeItem('piUser');
      }
    }
  }, 1000);
});

  function appLogin() {
    if (typeof showLoginModal === "function") showLoginModal();
    else if (typeof showAuthModal === "function") showAuthModal(false);
  }

  function appRegister() {
    if (typeof showRegisterModal === "function") showRegisterModal();
    else if (typeof showAuthModal === "function") showAuthModal(true);
  }

  
  document.addEventListener("DOMContentLoaded", function(){
    const menu = document.getElementById("loginMenu");
    if(menu){
      menu.innerHTML = `
        <select id="loginSelect" style="font-size:0.85em;padding:4px 10px;border-radius:22px;border:1px solid #ccc;background:#fff;cursor:pointer;">
          <option value="">Pilih Login</option>
          <option value="pi">Login Pi</option>
          <option value="app">Login App</option>
          <option value="register">Register App</option>
        </select>
      `;
      document.getElementById("loginSelect").addEventListener("change", function(){
        if (this.value === "pi") piLogin();
        else if (this.value === "app") appLogin();
        else if (this.value === "register") appRegister();
        this.value = "";
      });
    }
  });

</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const pwInput = document.getElementById("loginPassword");
  const toggle = document.getElementById("togglePassword");

if (pwInput && toggle) {
    toggle.addEventListener("click", function () {
      if (pwInput.type === "password") {
        pwInput.type = "text";
        toggle.textContent = "üôà"; // icon mata tertutup
      } else {
        pwInput.type = "password";
        toggle.textContent = "üëÅÔ∏è"; // icon mata terbuka
      }
    });
  }
});
</script>

<body>
  <!-- Header Slider -->
  <div id="header-slider">
    <img src="https://raw.githubusercontent.com/Evanadua/MyProject_CPiN/refs/heads/main/assets/images/header3.jpg" class="slide" alt="Header Slide 1" />
    <img src="https://raw.githubusercontent.com/Evanadua/MyProject_CPiN/refs/heads/main/assets/images/header2.jpg" class="slide" alt="Header Slide 2" />
    <img src="https://raw.githubusercontent.com/Evanadua/MyProject_CPiN/refs/heads/main/assets/images/header1.jpg" class="slide" alt="Header Slide 3" />
  </div>

  
<script>
 	// JS placeholder

function startHeaderSlider() {
  const slides = document.querySelectorAll('#header-slider .slide');
  let index = 0;
  if (slides.length === 0) return;

  slides[index].classList.add('active');

  setInterval(() => {
    slides[index].classList.remove('active');
    index = (index + 1) % slides.length;
    slides[index].classList.add('active');
  }, 4000);
}

document.addEventListener("DOMContentLoaded", function () {
  startHeaderSlider();
});
</script>

  <!-- Header Section 
  <div class="header-wrap">
    <img alt="Header Background" class="header-bg" id="headerBg" src="https://raw.githubusercontent.com/Evanadua/MyProject_CPiN/refs/heads/main/img_header.png"/>
    <button class="header-bg-upload" onclick="document.getElementById('headerBgInput').click()">
      Ganti Gambar Header
    </button>
    <input accept="image/*" id="headerBgInput" onchange="changeHeaderBg(event)" style="display:none" type="file"/>
    <div class="header">
      <div class="header-row">
        <div class="header-logo-wrap">
          <img alt="Logo ConsPiSindo" class="header-logo" id="logoImg" src="https://raw.githubusercontent.com/Evanadua/MyProject_CPiN/refs/heads/main/logo.png"/>
          <button class="header-logo-upload" onclick="document.getElementById('logoInput').click()">
            Ganti Logo
          </button>
          <input accept="image/*" id="logoInput" onchange="changeLogo(event)" style="display:none" type="file"/>
        </div>
        -->
        <div class="header-content">
          <div class="header-title">ConsPIndo</div>
          <div class="header-desc">Consortium Pioneers Indonesia</div>
          <div class="header-info">
           <span id="memberCount">1 Member</span>
            &middot;
            <span>General Info</span>
          </div>
        </div>
        <div class="header-btns">
          <button class="invite" id="inviteBtn">Invite</button>
          <button id="buyNowBtn">Buy Now</button>
          <div id="loginMenu"></div>
          <div id="loginStatus" style="margin-top:6px;color:green;font-size:0.95em;"></div>
          <button id="logoutPiBtn" style="display:none;" onclick="piLogout()">Logout Pi</button>
        </div>
      </div>
    </div>
    <div style="clear:both;"></div>
  </div>
          
  <!-- ‚¨á Avatar kanan -->
  <div id="userAvatarContainer">
    <img id="userAvatar" src="" alt="Foto Profil" />
    <div id="userTooltip"></div>
  </div>
</div>

  <!-- Tab Menu -->
  <div class="tab-menu">
    <button class="active" id="homeTab">Home</button>
    <button id="scheduleTab">Schedule</button>
    <button id="servicesTab">Services</button>
    <button id="blogTab">Blog</button>
  </div>
  
  
<div id="adminMemberList"></div>
 <!-- Harus ada 
   <button class="btn" id="adminMenuBtn" style="display:none;margin:8px 0;">Admin Panel</button> 
  -->
  <!-- Auth Modal -->
  <div class="modal" id="authModal" style="display:none;">
    <div class="modal-content" style="max-width:400px;">
      <span class="close" onclick="closeModal('authModal')">&times;</span>
      <h2 style="text-align:center;margin-top:0;">Registrasi / Login</h2>
      <div id="authTabs" style="display:flex;gap:8px;justify-content:center;margin-bottom:12px;">
        <button class="btn" id="tabLogin" style="background:#2563eb;color:#fff;">Login</button>
        <button class="btn" id="tabRegister" style="background:#eee;color:#2563eb;">Registrasi</button>
      </div>
      <form id="loginForm">
        <input id="loginEmail" placeholder="Email" style="width:100%;margin-bottom:8px;" type="email"/>
        <input id="loginPassword" placeholder="Password" style="width:100%;margin-bottom:8px;" type="password"/>
         <button class="btn" id="loginBtn" type="button">Login</button>
      </form>
      <form id="registerForm" style="display:none;">
        <input id="regEmail" placeholder="Email" style="width:100%;margin-bottom:8px;" type="email"/>
        <input id="regPassword" placeholder="Password" style="width:100%;margin-bottom:8px;" type="password"/>
        <input id="regPassword2" placeholder="Konfirmasi Password" style="width:100%;margin-bottom:8px;" type="password"/>
        <button class="btn" id="registerBtn" type="button">Register</button>
      </form>
      <div id="authError" style="color:red;margin-top:10px;display:none;"></div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div id="pageContent"></div>
    
    <!-- Modal untuk Artikel Lengkap -->
    <div id="fullArticleModal">
      <button onclick="closeFullArticle()" style="float: right; background: #f00; color: #fff; border: none; padding: 5px 10px; cursor: pointer;">X</button>
      <h4 id="fullArticleTitle"></h4>
      <p id="fullArticleBody"></p>
    </div>
  </div>

  <!-- Floating Action Button -->
  <div class="fab" id="adminFabBtn" style="display: none;" onclick="showAdminPanel()">
    <i class="fa fa-cog"></i>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
   <a class="nav-item active" href="#" id="legalMenu">
  <i class="fa fa-gavel"></i>
  <span>Legal</span>
</a>
    <a class="nav-item" href="#" id="groupMenu">
      <i class="fa fa-comments"></i>
      <span>Group</span>
    </a>
    <a class="nav-item" href="#" id="shopMenu">
      <i class="fa fa-store"></i>
      <span>Shop</span>
    </a>
    <a class="nav-item" href="#" id="myProfileMenu">
      <i class="fa fa-user"></i>
      <span>My Profile</span>
    </a>
  </div>

  <!-- Modals -->
  <div class="modal" id="inviteModal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('inviteModal')">&times;</span>
      <h3>Undang Teman ke Group</h3>
      <p>Bagikan kode invite: <b id="groupInviteCodeModal">2QQ32Y</b></p>
      <button onclick="copyGroupInviteCode()">Salin Kode</button>
    </div>
  </div>
<div class="modal" id="groupModal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('groupModal')">&times;</span>
      <h3>Group Chat</h3>
      <div id="groupChatList"></div>
      <button class="btn" onclick="openGroupChat()">Buka Group Chat</button>
      <span class="chat-username" id="groupChatUsername"></span>
    </div>
  </div>
<div class="modal" id="shopModal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('shopModal')">&times;</span>
      <h3>Shop</h3>
      <div id="shopContent"></div>
    </div>
  </div>
  <div class="main-content">
  <div id="adminPanel" style="display:none;">
    <h2>Admin Panel</h2>
    <div class="btn-row">
      <button class="btn" onclick="showAddProductForm()">Tambah Produk</button>
      <button class="btn" onclick="showManualProductForm()">Tambah Produk Manual</button>
      <button class="btn" onclick="showMyProfile()">My Profile</button>
      <button class="btn" onclick="showServices()">Layanan Kami</button>
      <button class="btn" onclick="showLegal()">Legal</button>
      <button class="btn" onclick="showShop()">Shop</button>
      <button class="btn btn-danger" onclick="resetAllMembers()">Reset All Members</button>
    </div>
    <div id="adminShopBtns" class="admin-panel" style="margin-bottom:16px;"></div>
    <div id="shopProducts"></div> <!-- Ini perlu agar renderShopProducts bekerja -->
  <!-- Tempat form tambah produk -->
     <div id="addProductManualForm" style="display:none; margin-top: 20px;"></div>
    <div id="addProductForm" style="display:none;">
    <h3>Tambah Produk</h3>
    <input id="productName" placeholder="Nama Produk" style="width:100%;margin-bottom:8px;" type="text"/>
    <input id="productPrice" placeholder="Harga" style="width:100%;margin-bottom:8px;" type="number"/>
    <textarea id="productDescription" placeholder="Deskripsi Produk" style="width:100%;margin-bottom:8px;"></textarea>
    <input id="productImageUrl" placeholder="URL Gambar Produk" style="width:100%;margin-bottom:8px;" type="text"/>
    <button class="btn" onclick="addProduct()">Tambah Produk</button>
  </div>
  <!--
  <div id="myProfileContent" style="display:none;">
    <h2>My Profile</h2>
    <div id="profileDetails"></div>
    <button class="btn" onclick="openMyProfileModal()">Edit Profile</button>
    <button class="btn" onclick="openChangePwdModal()">Ganti Password</button>
    <button class="btn" onclick="logout()">Logout</button>
  </div>
   <div class="modal" id="myProfileEditContainer" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('myProfileEditModal')">&times;</span>
      <h3>Edit Profile</h3>
      <input id="editProfileName" placeholder="Nama Lengkap" style="width:100%;margin-bottom:8px;" type="text"/>
      <input id="editProfileEmail" placeholder="Email" style="width:100%;margin-bottom:8px;" type="email"/>
      <button class="btn" onclick="saveProfileChanges()">Simpan Perubahan</button>
    </div>
  </div>

--><!-- === MODAL: MY PROFILE === -->
<div class="modal" id="myProfileModal" style="display:none;">
  <div class="modal-content" style="max-width:400px; margin:auto;">
    <span class="close" onclick="closeMyProfileModal()">&times;</span>
    <h3 style="text-align:center;">Profil Saya</h3>

    <!-- Foto Profil -->
    <div style="text-align:center;margin-bottom:12px;">
      <img id="profilePhoto" src="" alt="Foto Profil" width="100" height="100"
           style="border-radius:50%;border:1px solid #ccc;object-fit:cover;"><br>
      <label for="profilePhotoInputLocal" style="display:inline-block;margin-top:6px;">
        Ganti Foto Profil:
      </label><br>
      <input type="file" id="profilePhotoInputLocal" accept="image/*">
    </div>        
    <button class="btn" onclick="openMyProfileModal()">My Profile</button>

    
  <div class="form-group">
    <label for="profileUsername">Nama Pengguna</label>
    <input type="text" id="profileUsername" class="form-control" placeholder="Nama pengguna">
  </div>

  <div class="form-group">
    <label for="profileEmail">Email</label>
    <input type="email" id="profileEmail" class="form-control" placeholder="Email">
  </div>

  <div class="form-group">
    <label for="profilePhone">Nomor HP</label>
    <input type="tel" id="profilePhone" class="form-control" placeholder="Nomor Telepon">
  </div>

  <div style="margin-top:10px;text-align:right;">
    <button class="btn" onclick="saveProfile()">Simpan Profil</button>
    <button class="btn btn-danger" onclick="logoutUser()">Logout</button>
  </div>
  <div id="authError" style="display:none;margin-top:10px;"></div>
</div>


<!-- === MODAL SERVICES === --><!-- ========== HALAMAN DAFTAR LAYANAN ========== -->
<div id="serviceList"></div>
<div id="serviceDetailContent"></div>
<div style="margin-top:10px;">
  <button id="adminLoginBox" class="btn" onclick="serviceAdminLogin()">Login Admin</button>
  <button id="adminLogoutBox" class="btn" onclick="serviceAdminLogout()" style="display:none;">Logout Admin</button>
</div>


<!-- === MODAL HOME DropDownMenu === -->
 
  <!-- ‚úÖ BAGIAN POSTINGAN USER -->
  <div id="userPostCard" style="margin: 20px 0;"></div>

 

<div class="page" id="page-blog" style="display:none;">
  <div id="blogPosts"></div>
</div>


 
  <div id="shopContent" style="display:none;">
    <h2>Shop</h2>
    <div id="shopProductsList"></div>
    <button class="btn" onclick="loadMoreProducts()">Lihat Semua Produk</button>
    </div>
  
  <div id="blogContent" style="display:none;">
    <h2>Blog</h2>
    <div id="blogPosts"></div>
    <button class="btn" onclick="loadMoreBlogPosts()">Load More</button>
  </div>
  <div id="scheduleContent" style="display:none;">
    <h2>Jadwal Kegiatan</h2>
    <div id="calendar"></div>
  </div>
  <div id="pageContent"></div>
  </div>
</div>

  <div class="modal" id="shopModal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('shopModal')">&times;</span>
      <h3>Shop</h3>
      <div id="shopProductsList"></div>
      <button class="btn" onclick="openCart()">Keranjang Belanja</button>
    </div>
  </div>
  <div class="modal" id="buyNowModal" style="display:none;">
    <div class="modal-content" id="buyNowContent" style="max-width:350px;">
     <span class="close" onclick="closeModal('buyNowModal')">&times;</span>
      <h3>Pesan Sekarang</h3>
      <p>Silakan isi detail pesanan Anda:</p>
      <input id="buyerNameCheckout" placeholder="Nama Anda" style="width:100%;margin-bottom:8px;" type="text"/>
      <input id="buyerAddressCheckout" placeholder="Alamat Pengiriman" style="width:100%;margin-bottom:8px;" type="text"/>
      <button class="btn" onclick="processOrder()">Proses Pesanan</button>
    </div>
  </div>

<div class="modal" id="cartModal" style="display:none;">
  <div class="modal-content" style="max-width:400px;">
    <span class="close" onclick="closeModal('cartModal')">&times;</span>
    <h3>Keranjang Belanja</h3>
    <div id="cartItems"></div>
    <button class="btn" onclick="checkout()">Checkout</button>
  </div>
</div><!-- Modal Detil Produk -->
<div id="productDetailModal" class="modal" style="display:none;">
  <div class="modal-content" id="productDetailContent" style="max-width:400px;">
    <!-- Konten akan dimuat dari JS -->
  </div>
</div>
<!-- === GROUP SECTION WITH CHAT === -->
<div id="groupList" class="group-list"></div>

<!-- === GROUP CHAT MODAL === -->
<div class="modal" id="groupChatModal" style="display:none;">
  <div class="modal-content" style="max-width:400px;">
    <span class="close" onclick="closeModal('groupChatModal')">&times;</span>
    <h3 id="groupChatTitle">Group Chat</h3>
    <div id="groupChatMessages" style="height:320px;overflow:auto;border:1px solid #eee;padding:8px 6px 8px 6px;margin-bottom:10px;background:#f9f9f9;border-radius:6px;"></div>
    <input id="groupChatInput" placeholder="Ketik pesan..." style="width:70%;" type="text"/>
    <button class="btn" onclick="sendGroupChat()">Kirim</button>
  </div>
</div>
<style>
  #groupChatMessages div {
    margin-bottom: 6px;
    font-size: 14px;
    line-height: 1.4;
  }
</style>

  <div class="modal" id="changePwdModal" style="display:none;">
    <div class="modal-content" style="max-width:350px;">
      <span class="close" onclick="closeModal('changePwdModal')">&times;</span>
      <h3>Ganti Password Admin</h3>
      <input type="password" id="oldPwd" placeholder="Password Lama" style="width:100%;margin-bottom:8px;">
      <input type="password" id="newPwd" placeholder="Password Baru" style="width:100%;margin-bottom:8px;">
      <input type="password" id="confirmPwd" placeholder="Ulangi Password Baru" style="width:100%;margin-bottom:8px;">
      <button class="btn" onclick="changeAdminPassword()">Simpan</button>
    </div>
  </div>
  <!-- === EVENT ADD MODAL === -->
<!-- EVENT ADD MODAL -->
<div class="modal" id="eventAddModal" style="display: none;">
  <div class="modal-content">
    <span class="close" onclick="closeModal('eventAddModal')">&times;</span>
    <h3 id="modalTitleAdd">Tambah Event</h3>
    <input type="hidden" id="eventAddId">
    <input type="text" id="eventAddTitle" placeholder="Judul Event">
    
    <input type="datetime-local" id="eventAddStart">
    <small style="color:#888;">Start</small>
    
    <input type="datetime-local" id="eventAddEnd">
    <small style="color:#888;">End</small>
    <textarea id="eventAddDesc" placeholder="Deskripsi"></textarea>
    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
      <button id="eventAddSaveBtn" onclick="saveNewEvent()">Simpan</button>
      <button onclick="closeModal('eventAddModal')">Batal</button>
    </div>
  </div>
</div>
<!-- === EVENT EDIT MODAL === -->
<div class="modal" id="eventEditModal" style="display: none;">
  <div class="modal-content">
    <span class="close" onclick="closeModal('eventEditModal')">&times;</span>
    <h3 id="modalTitleEdit">Edit Event</h3>
    <input type="hidden" id="eventEditId">
    <input type="text" id="eventEditTitle" placeholder="Judul Event">
    <input type="datetime-local" id="eventEditStart">
    <input type="datetime-local" id="eventEditEnd">
    <textarea id="eventEditDesc" placeholder="Deskripsi"></textarea>
    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
      <button id="eventEditSaveBtn" onclick="saveEventEdit()">Simpan</button>
      <button id="eventEditDeleteBtn" onclick="deleteEvent()">Hapus</button>
    </div>
  </div>
</div>


  <div class="modal" id="fullArticleModal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeFullArticle()">&times;</span>
      <h3 id="fullArticleTitle"></h3>
      <p id="fullArticleBody"></p>
    </div>
  </div>

  <!-- === CSS Tambahan untuk Modal & Tombol Compact === -->
<style>
  /* Tombol navigasi biar compact */
  .fc-toolbar-chunk button {
    font-size: 12px !important;
    padding: 4px 8px !important;
    border-radius: 6px !important;
    margin: 0 2px !important;
    background: linear-gradient(135deg, #1c1c1c, #444);
    color: #f5d67b !important;
    border: 1px solid #f5d67b;
    transition: 0.3s;
  }
  .fc-toolbar-chunk button:hover {
    background: linear-gradient(135deg, #f5d67b, #1c1c1c);
    color: #fff !important;
  }

  /* Modal Container */
  .event-modal {
    display: none;
    position: fixed;
    z-index: 1050;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background: rgba(0,0,0,0.6);
  }

  /* Modal Box */
  .event-modal-content {
    background: #111;
    margin: 8% auto;
    padding: 20px;
    border-radius: 16px;
    width: 90%;
    max-width: 600px;
    color: #fff;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0px 8px 24px rgba(0,0,0,0.5);
    background: linear-gradient(160deg, #000, #2c2c2c, #000);
    border: 1px solid #f5d67b;
  }

  /* Modal Header */
  .event-modal-header {
    text-align: center;
    padding-bottom: 12px;
    margin-bottom: 16px;
    border-bottom: 1px solid #f5d67b;
  }
  .event-modal-header h2 {
    font-size: 20px;
    background: linear-gradient(90deg, #f5d67b, #d4af37, #a67c00);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: 1px;
  }

  /* Modal Close Button */
  .event-close {
    color: #f5d67b;
    float: right;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
  }
  .event-close:hover {
    color: #fff;
  }

  /* Event Content */
  .event-modal-body {
    max-height: 350px;
    overflow-y: auto;
    padding-right: 10px;
  }
  .event-item {
    padding: 10px;
    margin-bottom: 10px;
    border-left: 4px solid #f5d67b;
    background: rgba(255,255,255,0.05);
    border-radius: 8px;
  }
  .event-item h3 {
    margin: 0;
    font-size: 16px;
    color: #f5d67b;
  }
  .event-item p {
    margin: 4px 0 0;
    font-size: 13px;
    color: #ddd;
  }
</style>

<!-- === MODAL STRUCTURE === -->
<div id="eventModal" class="event-modal">
  <div class="event-modal-content">
    <span class="event-close" onclick="closeEventModal()">&times;</span>
    <div class="event-modal-header">
      <h2 id="modalTitle">Event in this time</h2>
    </div>
    <div class="event-modal-body" id="eventModalBody">
      <!-- Daftar Event akan diisi lewat JS -->
    </div>
  </div>
</div>


<!-- === SCRIPT JS untuk Modal === -->
<script>
  function showEventModal(events) {
    const modal = document.getElementById('eventModal');
    const body = document.getElementById('eventModalBody');
    body.innerHTML = '';
    if (events && events.length > 0) {
      events.forEach(ev => {
        body.innerHTML += `
         <div class="event-item">
          <h3>${ev.title}</h3>
          <p>${ev.start} - ${ev.end || ''}</p>
          <div>${ev.description || ''}</div>
      </div>`;
      });
    } else {
      body.innerHTML = '<p style="color:#aaa;text-align:center;">No event available</p>';
    }

    modal.style.display = 'block';
  }

  function closeEventModal() {
    document.getElementById('eventModal').style.display = 'none';
  }

  // Close jika klik di luar modal
  window.onclick = function(e) {
    const modal = document.getElementById('eventModal');
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  }
</script>


  <!-- Footer -->
  <div class="footer">
    &copy; 2025 ConsPIndo. All rights reserved.<br/>
    Trademark and design by <strong>MeribuCo</strong>
    <div class="footer-line"></div><br/>
  </div>

  
 
<script src="main.js"></script>

</body>
</html>

